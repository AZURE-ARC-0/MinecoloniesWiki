---
import { getWikiPageForItem } from '@utils/items';

import CombinedItem from './CombinedItem.astro';
import CombinedSelfItem from './CombinedSelfItem.astro';
import DirectItem from './DirectItem.astro';

interface Props {
  currentPage: string;
  name: string;
}

const { currentPage, name } = Astro.props;

const itemPage = await getWikiPageForItem(name);
if (itemPage === undefined) {
  throw new Error(`Wiki page for item '${name}' does not exist.`);
}
---

{itemPage.type === 'direct' && <DirectItem currentPage={currentPage} page={itemPage} />}
{itemPage.type === 'combined' && <CombinedItem currentPage={currentPage} page={itemPage} />}
{itemPage.type === 'combined-self' && <CombinedSelfItem currentPage={currentPage} page={itemPage} />}
